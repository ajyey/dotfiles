# Dotfiles Managed with GNU Stow

This repo manages all of my dotfiles using [GNU Stow](https://www.gnu.org/software/stow/) to create symlinks into `$HOME`. It also includes a `fish_plugins` file to manage Fish shell plugins with [Fisher](https://github.com/jorgebucaran/fisher).

---

## ðŸ“¦ **Requirements**

- **macOS or Linux**
- [Homebrew](https://brew.sh/) (on macOS)
- [GNU Stow](https://www.gnu.org/software/stow/)

Install Stow (macOS):

```bash
brew install stow
```

## Repo Structure

```bash
~/.dotfiles/
â”œâ”€â”€ fish/
â”‚   â””â”€â”€ .config/
â”‚       â””â”€â”€ fish/
â”‚           â”œâ”€â”€ config.fish
â”‚           â”œâ”€â”€ fish_plugins
â”‚           â”œâ”€â”€ functions/      # generated by Fisher (ignored in git)
â”‚           â””â”€â”€ conf.d/         # generated by Fisher
```

Each folder (fish, zsh, etc.) is a package that Stow symlinks into $HOME.

## Saving Changes

1. Make edits directly in your normal config location (e.g. ~/.config/fish/config.fish).

2. Since thatâ€™s a symlink, the changes are actually saved in ~/.dotfiles.

3. Commit your changes:

```bash
cd ~/.dotfiles
git add .
git commit -m "Update fish config"
git push
```

## Restoring on a New Machine

Clone the repo:

```bash
git clone <repo-url> ~/.dotfiles
cd ~/.dotfiles
```

Install Stow:

```bash
brew install stow   # macOS
sudo apt install stow  # Debian/Ubuntu
```

Stow the packages you want:

```bash
stow fish
stow zsh
```

This will create symlinks in $HOME pointing to the files in the repo.

## Fish Plugins
Plugins are managed with Fisher.

ðŸ“¥ Install Fisher
On a new machine:

```bash
brew install fisher
```

### Install Plugins from the List

The file ~/.config/fish/fish_plugins contains the plugin list. To install:

```bash
fisher update
```

Fisher will read fish_plugins and install everything automatically.

### Adding or Removing Plugins

Install or remove plugins:

```bash
fisher install <plugin>
fisher remove <plugin>
```

Update the plugin list:

```bash
fisher list > ~/.config/fish/fish_plugins
```

Commit the updated list:

```bash
cd ~/.dotfiles
git add fish/.config/fish/fish_plugins
git commit -m "Update Fish plugins"
git push
```

## Ignored Files

- `fish_variables` â€“ contains machine-specific universal variables.
- `functions/` and `conf.d/` â€“ plugin-generated files (rebuilt by Fisher from fish_plugins).

ðŸ”— Unstowing
To remove symlinks without deleting files:

```bash
cd ~/.dotfiles
stow -D fish
```

## Tips

- Each app/config has its own folder/package.
- The folder structure in each package should match $HOME.
- Only track configs you actually want to sync across machines.

With this setup:

- Configs are stored in Git.
- Symlinks are managed by GNU Stow.
- Fish plugins are cleanly managed with a plugin list.
